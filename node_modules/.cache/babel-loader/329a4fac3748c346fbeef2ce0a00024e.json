{"ast":null,"code":"import _regeneratorRuntime from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import classes from\"./ProductFood.module.scss\";import ProductItem from\"../ProductItem/ProductItem\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProductFood=function ProductFood(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// Get choosen country from props\nvar choosenCountry=props.country;// country name\nvar isUserChoose=props.isChooseCategory;// true or false\nuseEffect(function(){// Fetch food data from (Firebase)\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadedData,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return fetch(\"https://food-delivery-b0655-default-rtdb.firebaseio.com/food/\".concat(choosenCountry,\".json\"));case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"Request Failed!\");case 6:_context.next=8;return response.json();case 8:data=_context.sent;loadedData=[];// Handling fetched data and store data in an array.\nfor(key in data){loadedData.push({id:data[key],name:data[key].foodName,type:data[key].foodType,price:data[key].foodPrice});}setFood(loadedData);setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData().catch(function(error){setError(error.message||\"Something went wrong!\");setIsLoading(false);});},[choosenCountry]);if(!isUserChoose)return/*#__PURE__*/_jsx(\"p\",{className:classes[\"no-items\"],children:\"There are no food items right now.\"});if(isLoading)return/*#__PURE__*/_jsx(\"p\",{className:classes[\"loading\"],children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:classes[\"error\"],children:error});// Start Mapping and push the result to ProductItem component.\nvar foodItems=food.map(function(item){return/*#__PURE__*/_jsx(ProductItem,{id:item.id,name:item.name,type:item.type,price:item.price},item.id);});return/*#__PURE__*/_jsx(\"ul\",{className:classes.products,children:foodItems});};export default ProductFood;","map":{"version":3,"names":["useEffect","useState","classes","ProductItem","ProductFood","props","food","setFood","isLoading","setIsLoading","error","setError","choosenCountry","country","isUserChoose","isChooseCategory","fetchData","fetch","response","ok","Error","json","data","loadedData","key","push","id","name","foodName","type","foodType","price","foodPrice","catch","message","foodItems","map","item","products"],"sources":["D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/src/components/Products/ProductFood/ProductFood.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport classes from \"./ProductFood.module.scss\";\r\nimport ProductItem from \"../ProductItem/ProductItem\";\r\n\r\nconst ProductFood = (props) => {\r\n  const [food, setFood] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Get choosen country from props\r\n  const choosenCountry = props.country; // country name\r\n  const isUserChoose = props.isChooseCategory; // true or false\r\n\r\n  useEffect(() => {\r\n    // Fetch food data from (Firebase)\r\n    const fetchData = async () => {\r\n      setIsLoading(true);\r\n      const response = await fetch(\r\n        `https://food-delivery-b0655-default-rtdb.firebaseio.com/food/${choosenCountry}.json`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Request Failed!\");\r\n      }\r\n      const data = await response.json();\r\n\r\n      let loadedData = [];\r\n      // Handling fetched data and store data in an array.\r\n      for (const key in data) {\r\n        loadedData.push({\r\n          id: data[key],\r\n          name: data[key].foodName,\r\n          type: data[key].foodType,\r\n          price: data[key].foodPrice,\r\n        });\r\n      }\r\n      setFood(loadedData);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchData().catch((error) => {\r\n      setError(error.message || \"Something went wrong!\");\r\n      setIsLoading(false);\r\n    });\r\n  }, [choosenCountry]);\r\n\r\n  if (!isUserChoose)\r\n    return (\r\n      <p className={classes[\"no-items\"]}>There are no food items right now.</p>\r\n    );\r\n\r\n  if (isLoading) return <p className={classes[\"loading\"]}>Loading...</p>;\r\n\r\n  if (error) return <p className={classes[\"error\"]}>{error}</p>;\r\n\r\n  // Start Mapping and push the result to ProductItem component.\r\n  const foodItems = food.map((item) => (\r\n    <ProductItem\r\n      key={item.id}\r\n      id={item.id}\r\n      name={item.name}\r\n      type={item.type}\r\n      price={item.price}\r\n    />\r\n  ));\r\n\r\n  return <ul className={classes.products}>{foodItems}</ul>;\r\n};\r\n\r\nexport default ProductFood;\r\n"],"mappings":"0eAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,QAAP,KAAoB,2BAApB,CACA,MAAOC,YAAP,KAAwB,4BAAxB,C,2CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAW,CAC7B,cAAwBJ,QAAQ,CAAC,EAAD,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eACA,eAAkCN,QAAQ,CAAC,IAAD,CAA1C,yCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAA0BR,QAAQ,CAAC,IAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA;AACA,GAAMC,eAAc,CAAGP,KAAK,CAACQ,OAA7B,CAAsC;AACtC,GAAMC,aAAY,CAAGT,KAAK,CAACU,gBAA3B,CAA6C;AAE7Cf,SAAS,CAAC,UAAM,CACd;AACA,GAAMgB,UAAS,4FAAG,sKAChBP,YAAY,CAAC,IAAD,CAAZ,CADgB,sBAEOQ,MAAK,wEACsCL,cADtC,UAFZ,QAEVM,QAFU,kBAMXA,QAAQ,CAACC,EANE,8BAOR,IAAIC,MAAJ,CAAU,iBAAV,CAPQ,8BASGF,SAAQ,CAACG,IAAT,EATH,QASVC,IATU,eAWZC,UAXY,CAWC,EAXD,CAYhB;AACA,IAAWC,GAAX,GAAkBF,KAAlB,CAAwB,CACtBC,UAAU,CAACE,IAAX,CAAgB,CACdC,EAAE,CAAEJ,IAAI,CAACE,GAAD,CADM,CAEdG,IAAI,CAAEL,IAAI,CAACE,GAAD,CAAJ,CAAUI,QAFF,CAGdC,IAAI,CAAEP,IAAI,CAACE,GAAD,CAAJ,CAAUM,QAHF,CAIdC,KAAK,CAAET,IAAI,CAACE,GAAD,CAAJ,CAAUQ,SAJH,CAAhB,EAMD,CACDzB,OAAO,CAACgB,UAAD,CAAP,CACAd,YAAY,CAAC,KAAD,CAAZ,CAtBgB,uDAAH,kBAATO,UAAS,0CAAf,CAyBAA,SAAS,GAAGiB,KAAZ,CAAkB,SAACvB,KAAD,CAAW,CAC3BC,QAAQ,CAACD,KAAK,CAACwB,OAAN,EAAiB,uBAAlB,CAAR,CACAzB,YAAY,CAAC,KAAD,CAAZ,CACD,CAHD,EAID,CA/BQ,CA+BN,CAACG,cAAD,CA/BM,CAAT,CAiCA,GAAI,CAACE,YAAL,CACE,mBACE,UAAG,SAAS,CAAEZ,OAAO,CAAC,UAAD,CAArB,gDADF,CAIF,GAAIM,SAAJ,CAAe,mBAAO,UAAG,SAAS,CAAEN,OAAO,CAAC,SAAD,CAArB,wBAAP,CAEf,GAAIQ,KAAJ,CAAW,mBAAO,UAAG,SAAS,CAAER,OAAO,CAAC,OAAD,CAArB,UAAiCQ,KAAjC,EAAP,CAEX;AACA,GAAMyB,UAAS,CAAG7B,IAAI,CAAC8B,GAAL,CAAS,SAACC,IAAD,qBACzB,KAAC,WAAD,EAEE,EAAE,CAAEA,IAAI,CAACX,EAFX,CAGE,IAAI,CAAEW,IAAI,CAACV,IAHb,CAIE,IAAI,CAAEU,IAAI,CAACR,IAJb,CAKE,KAAK,CAAEQ,IAAI,CAACN,KALd,EACOM,IAAI,CAACX,EADZ,CADyB,EAAT,CAAlB,CAUA,mBAAO,WAAI,SAAS,CAAExB,OAAO,CAACoC,QAAvB,UAAkCH,SAAlC,EAAP,CACD,CA/DD,CAiEA,cAAe/B,YAAf"},"metadata":{},"sourceType":"module"}