{"ast":null,"code":"import _slicedToArray from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer}from\"react\";import FoodContext from\"./food-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialFood={items:[],totalPrice:0};var foodReducer=function foodReducer(state,action){if(action.type===\"ADD\"){var existItemIndex=state.items.findIndex(function(singleItem){return singleItem.id===action.item.id;});var existingItem=state.items[existItemIndex];var updatedItems;var updatedItem;var updatedTotalPrice=state.totalPrice+action.item.price*action.item.amount;if(existingItem){if(existingItem.amount===action.item.amount){updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount+1});updatedTotalPrice=state.totalPrice+action.item.price;}else{updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount+action.item.amount});updatedTotalPrice=state.totalPrice+action.item.price*action.item.amount;}updatedItems=_toConsumableArray(state.items);updatedItems[existItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}// const updatedTotalPrice =\n//   state.totalPrice + action.item.price * action.item.amount;\nreturn{items:updatedItems,totalPrice:updatedTotalPrice};}if(action.type===\"DELETE\"){var _existItemIndex=state.items.findIndex(function(itemId){return itemId.id===action.id;});var existItem=state.items[_existItemIndex];var _updatedItems;if(existItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existItem),{},{amount:existItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existItemIndex]=_updatedItem;}var _updatedTotalPrice=state.totalPrice-existItem.price;return{items:_updatedItems,totalPrice:_updatedTotalPrice};}return initialFood;};var FoodProvider=function FoodProvider(props){var _useReducer=useReducer(foodReducer,initialFood),_useReducer2=_slicedToArray(_useReducer,2),foodProducts=_useReducer2[0],dispatchFoodProducts=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchFoodProducts({type:\"ADD\",item:item});};var deleteItemFromCartHandler=function deleteItemFromCartHandler(id){dispatchFoodProducts({type:\"DELETE\",id:id});};var foodDetails={items:foodProducts.items,totalPrice:foodProducts.totalPrice,addItem:addItemToCartHandler,deleteItem:deleteItemFromCartHandler};return/*#__PURE__*/_jsx(FoodContext.Provider,{value:foodDetails,children:props.children});};export default FoodProvider;","map":{"version":3,"names":["useReducer","FoodContext","initialFood","items","totalPrice","foodReducer","state","action","type","existItemIndex","findIndex","singleItem","id","item","existingItem","updatedItems","updatedItem","updatedTotalPrice","price","amount","concat","itemId","existItem","filter","FoodProvider","props","foodProducts","dispatchFoodProducts","addItemToCartHandler","deleteItemFromCartHandler","foodDetails","addItem","deleteItem","children"],"sources":["D:/Front-End Web Development/Exercises/All/REACT/React-App-Food-Delivery/src/store/food-provider.jsx"],"sourcesContent":["import { useReducer } from \"react\";\r\nimport FoodContext from \"./food-context\";\r\n\r\nconst initialFood = {\r\n  items: [],\r\n  totalPrice: 0,\r\n};\r\n\r\nconst foodReducer = (state, action) => {\r\n  if (action.type === \"ADD\") {\r\n    const existItemIndex = state.items.findIndex(\r\n      (singleItem) => singleItem.id === action.item.id\r\n    );\r\n\r\n    const existingItem = state.items[existItemIndex];\r\n\r\n    let updatedItems;\r\n    let updatedItem;\r\n    let updatedTotalPrice =\r\n      state.totalPrice + (action.item.price * action.item.amount);\r\n    \r\n    if (existingItem) {\r\n      if (existingItem.amount === action.item.amount) {\r\n        updatedItem = {\r\n          ...existingItem,\r\n          amount: existingItem.amount + 1,\r\n        };\r\n        updatedTotalPrice = state.totalPrice + action.item.price;\r\n      } else {\r\n        updatedItem = {\r\n          ...existingItem,\r\n          amount: existingItem.amount + action.item.amount,\r\n        };\r\n        updatedTotalPrice =\r\n          state.totalPrice + action.item.price * action.item.amount;\r\n      }\r\n\r\n      updatedItems = [...state.items];\r\n      updatedItems[existItemIndex] = updatedItem;\r\n    } else {\r\n      updatedItems = state.items.concat(action.item);\r\n    }\r\n\r\n    // const updatedTotalPrice =\r\n    //   state.totalPrice + action.item.price * action.item.amount;\r\n\r\n    return {\r\n      items: updatedItems,\r\n      totalPrice: updatedTotalPrice,\r\n    };\r\n  }\r\n\r\n  if (action.type === \"DELETE\") {\r\n    const existItemIndex = state.items.findIndex(\r\n      (itemId) => itemId.id === action.id\r\n    );\r\n\r\n    const existItem = state.items[existItemIndex];\r\n\r\n    let updatedItems;\r\n\r\n    if (existItem.amount === 1) {\r\n      updatedItems = state.items.filter((item) => item.id !== action.id);\r\n    } else {\r\n      const updatedItem = { ...existItem, amount: existItem.amount - 1 };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existItemIndex] = updatedItem;\r\n    }\r\n\r\n    const updatedTotalPrice = state.totalPrice - existItem.price;\r\n\r\n    return {\r\n      items: updatedItems,\r\n      totalPrice: updatedTotalPrice,\r\n    };\r\n  }\r\n\r\n  return initialFood;\r\n};\r\n\r\nconst FoodProvider = (props) => {\r\n  const [foodProducts, dispatchFoodProducts] = useReducer(\r\n    foodReducer,\r\n    initialFood\r\n  );\r\n\r\n  const addItemToCartHandler = (item) => {\r\n    dispatchFoodProducts({ type: \"ADD\", item });\r\n  };\r\n\r\n  const deleteItemFromCartHandler = (id) => {\r\n    dispatchFoodProducts({ type: \"DELETE\", id });\r\n  };\r\n\r\n  const foodDetails = {\r\n    items: foodProducts.items,\r\n    totalPrice: foodProducts.totalPrice,\r\n    addItem: addItemToCartHandler,\r\n    deleteItem: deleteItemFromCartHandler,\r\n  };\r\n\r\n  return (\r\n    <FoodContext.Provider value={foodDetails}>\r\n      {props.children}\r\n    </FoodContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FoodProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}